<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
        <title>plutonium-form Demo</title>
        <script src="../../webcomponentsjs/webcomponents-lite.min.js"></script>
        <link rel="import" href="../../paper-button/paper-button.html">
        <link rel="import" href="../../paper-dialog/paper-dialog.html">
        <link rel="import" href="../../google-youtube/google-youtube.html">
        <link rel="import" href="../../iron-ajax/iron-ajax.html">
        <link rel="import" href="../plutonium-cm-field.html">
        <link rel="import" href="../plutonium-cm-form.html">
        <link rel="import" href="../plutonium-cm-editor-text.html">
        <link rel="import" href="../plutonium-cm-editor-image.html">
        <link rel="import" href="../plutonium-cm-editor-link.html">
        <link rel="import" href="../plutonium-cm-editor-video.html">
        <link rel="import" href="../plutonium-cm-section.html">
    </head>
    <body unresolved>

        <button id="applyButton">Apply</button>

        <template is="dom-bind" id="app">
            <iron-ajax url="./sample-data/classification.json" last-response="{{classification}}" auto></iron-ajax>
            <iron-ajax url="./sample-data/model.json" last-response="{{model}}" auto></iron-ajax>
            <iron-ajax url="./sample-data/contacts.json" last-response="{{contacts}}" auto></iron-ajax>
            <h2>Content editor</h2>
            <plutonium-cm-form id="contentEditor" style="width: 100%"
                               contacts$="{{contacts}}"
                               content-model$="{{classification}}">
        </plutonium-cm-form>
        <h2>Content display</h2>
        <plutonium-cm-section id="contentDisplay"  content-model="{{classification}}">

        </plutonium-cm-section>

    </template>
    <script>
HTMLImports.whenReady(function () {

    document.getElementById('applyButton').addEventListener('click', function () {

        var model = JSON.parse(document.getElementById('contentEditor').getAttribute('content-model'));
        console.log('Apply model publishing: ' + JSON.stringify(model));
        document.getElementById('contentDisplay').setAttribute('content-model', JSON.stringify(model));
    });
});
//
//        document.querySelector('#laserbtn').addEventListener('click', function () {
//            formElement.fireLasers();
//        });
//
//        document.addEventListener("plutonium-form-lasers", function (e) {
//            console.log(e.detail.sound);
//        });

    </script>

</body>
</html>
